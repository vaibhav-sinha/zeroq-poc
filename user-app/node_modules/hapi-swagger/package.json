{
  "name": "hapi-swagger",
  "description": "A swagger documentation UI generator plugin for hapi",
  "version": "2.1.0",
  "author": {
    "name": "Glenn Jones"
  },
  "repository": {
    "type": "git",
    "url": "http://github.com/glennjones/hapi-swagger.git"
  },
  "main": "index",
  "keywords": [
    "docs",
    "swagger",
    "hapi"
  ],
  "license": "MIT",
  "engines": {
    "node": ">=0.10.40"
  },
  "dependencies": {
    "handlebars": "^4.0.0",
    "boom": "^2.8.0",
    "hoek": "^2.14.0",
    "joi": "~6.8.1",
    "shortid": "^2.2.2"
  },
  "devDependencies": {
    "inert": "^3.0.0",
    "vision": "^2.0.1",
    "blipp": "^2.1.3",
    "mocha": "^1.17.1",
    "chai": "^1.9.2",
    "hapi": "^10.3.0",
    "istanbul": "^0.3.17"
  },
  "scripts": {
    "test": "make test"
  },
  "peerDependencies": {
    "hapi": "^9.0.1 || ^10.0.0"
  },
  "readme": "# hapi-swagger\n\nThis is a [Swagger UI](https://github.com/wordnik/swagger-ui) plug-in for [HAPI](http://hapijs.com/) v9.x or v10.x  When installed it will self document HTTP API interface in a project.\n\n[![build status](https://img.shields.io/travis/glennjones/hapi-swagger.svg?style=flat-square)](http://travis-ci.org/glennjones/hapi-swagger)\n[![npm downloads](https://img.shields.io/npm/dm/hapi-swagger.svg?style=flat-square)](https://www.npmjs.com/package/hapi-swagger)\n[![MIT license](http://img.shields.io/badge/license-MIT-blue.svg?style=flat-square)](https://raw.github.com/glennjones/microformat-shic/master/license.txt)\n\n## Install\n\nYou can add the module to your HAPI using npm:\n\n    $ npm install hapi-swagger --save\n\nYou will also need to install the `inert` and `vision` plugs-ins which support templates and static content serving.\n\n    $ npm install inert --save\n    $ npm install vision --save\n\n## Adding the plug-in into your project\n\nIn your apps main .js file add the following code to created a `server` object:\n\n```Javascript\nvar Hapi            = require('hapi'),\n    Inert           = require('inert'),\n    Vision          = require('vision'),\n    HapiSwagger     = require('hapi-swagger'),\n    Pack            = require('./package');\n\nvar server = new Hapi.Server();\nserver.connection({\n        host: 'localhost',\n        port: 3000\n    });\n\nvar swaggerOptions = {\n        apiVersion: pack.version\n    };\n\nserver.register([\n    Inert,\n    Vision,\n    {\n        register: HapiSwagger,\n        options: swaggerOptions\n    }], function (err) {\n        server.start(function(){\n            // Add any server.route() config here\n            console.log('Server running at:', server.info.uri);\n        });\n    });\n```\n\n## Tagging your API routes\nAs a project may be a mixture of web pages and API endpoints you need to tag the routes you wish Swagger to document. Simply add the `tags: ['api']` property to the route object for any endpoint you want documenting.\n\nYou can even specify more tags and then later generate tag-specific documentation. If you specify `tags: ['api', 'foo']`, you can later use `/documentation?tags=foo` to load the documentation on the HTML page (see next section).\n\n```Javascript\n{\n    method: 'GET',\n    path: '/todo/{id}/',\n    config: {\n        handler: handlers.mapUsername,\n        description: 'Get todo',\n        notes: 'Returns a todo item by the id passed in the path',\n        tags: ['api'],\n        validate: {\n            params: {\n                username: Joi.number()\n                        .required()\n                        .description('the id for the todo item'),\n            }\n        }\n    },\n}\n```\n\n## Viewing the documentation page\nThe plugin adds a page into your site with the route `/documentation`. This page contains Swaggers UI to allow users to explore your API. You can also build custom pages on your own URL paths if you wish, see: \"Adding interface into a page\"\n\n\n\n\n\n\n## Adding interface into a page\nThe plugin adds all the resources needed to build the interface into your any page in your project. All you need to do is add some javascript into the header of a web page and add two elements into the HTML where you wish it to render. The example [be-more-hapi](https://github.com/glennjones/be-more-hapi) project makes use of a custom page where the interface is used with other elements.\n\n\n### Adding the javascript\n\nThe all the files in the URLs below are added by the plugin, but you must server the custom page as template using `reply.view()`.\n\n```html\n<link href='https://fonts.googleapis.com/css?family=Droid+Sans:400,700' rel='stylesheet' type='text/css'/>\n<link href='{{hapiSwagger.endpoint}}/swaggerui/css/highlight.default.css' media='screen' rel='stylesheet' type='text/css'/>\n<link href='{{hapiSwagger.endpoint}}/swaggerui/css/screen.css' media='screen' rel='stylesheet' type='text/css'/>\n<script src='{{hapiSwagger.endpoint}}/swaggerui/lib/shred.bundle.js' 'type=text/javascript'></script>\n<script src='{{hapiSwagger.endpoint}}/swaggerui/lib/jquery-1.x.min.js' type='text/javascript'></script>\n<script src='{{hapiSwagger.endpoint}}/swaggerui/lib/jquery.slideto.min.js' type='text/javascript'></script>\n<script src='{{hapiSwagger.endpoint}}/swaggerui/lib/jquery.wiggle.min.js' type='text/javascript'></script>\n<script src='{{hapiSwagger.endpoint}}/swaggerui/lib/jquery.ba-bbq.min.js' type='text/javascript'></script>\n<script src='{{hapiSwagger.endpoint}}/swaggerui/lib/handlebars-1.0.0.js' type='text/javascript'></script>\n<script src='{{hapiSwagger.endpoint}}/swaggerui/lib/underscore-min.js' type='text/javascript'></script>\n<script src='{{hapiSwagger.endpoint}}/swaggerui/lib/backbone-min.js' type='text/javascript'></script>\n<script src='{{hapiSwagger.endpoint}}/swaggerui/lib/swagger.js' type='text/javascript'></script>\n<script src='{{hapiSwagger.endpoint}}/swaggerui/swagger-ui.js' type='text/javascript'></script>\n<script src='{{hapiSwagger.endpoint}}/swaggerui/lib/highlight.7.3.pack.js' type='text/javascript'></script>\n<script src='{{hapiSwagger.endpoint}}/custom.js' type='text/javascript'></script>\n<script type=\"text/javascript\">\n  $(function () {\n    window.swaggerUi = new SwaggerUi({\n      url: window.location.protocol + '//' + window.location.host + '{{hapiSwagger.endpoint}}',\n      dom_id: \"swagger-ui-container\",\n      supportedSubmitMethods: ['get', 'post', 'put', 'delete'],\n      onComplete: function(swaggerApi, swaggerUi){\n        log(\"Loaded SwaggerUI\")\n        $('pre code').each(function(i, e) {\n            hljs.highlightBlock(e)\n        });\n        $('.response_throbber').attr( 'src', '{{hapiSwagger.endpoint}}/swaggerui/images/throbber.gif' );\n      },\n      onFailure: function(data) {\n        log(\"Unable to Load SwaggerUI\");\n      },\n      docExpansion: \"list\"\n    });\n    window.swaggerUi.load();\n  });\n</script>\n```\n\nIf you want to generate tag-specific documentation, you should change the URL from\n```javascript\nurl: window.location.protocol + '//' + window.location.host + '{{hapiSwagger.endpoint}}',\n```\nto:\n```javascript\nurl: window.location.protocol + '//' + window.location.host + '{{hapiSwagger.endpoint}}?tags=foo,bar,baz',\n```\nThis will load all routes that have one or more of the given tags (`foo` or `bar` or `baz`). More complex use of tags include:\n\n    ?tags=mountains,beach,horses\n    this will show routes WITH 'mountains' OR 'beach' OR 'horses'\n\n    ?tags=mountains,beach,+horses\n    this will show routes WITH ('mountains' OR 'beach')  AND 'horses'\n\n    ?tags=mountains,+beach,-horses\n    this will show routes WITH 'mountains' AND 'beach' AND NO 'horses'\n\n\n### Adding the HTML elements\n\nPlace the HTML code below into the body fo web page where you wish the interface to render\n\n```html\n<section id=\"swagger\">\n    <h1 class=\"entry-title api-title\">API</h1>\n    <div id=\"message-bar\" class=\"swagger-ui-wrap\"></div>\n    <div id=\"swagger-ui-container\" class=\"swagger-ui-wrap\"></div>\n</section>\n```\n\n\n### Options\nThere are number of options for advance use case. In most case you should only have to provide the apiVersion.\n\n* `apiVersion`: string The version of your API\n* `protocol`: e.g. `http` or `https` will override all request headers and basePath\n* `basePath`: string The base URL of the API i.e. `http://localhost:3000` (note, this is parsed with `url`, so if you do not specify a protocol, it will be interpreted as path with no hostname).\n* `documentationPath`:  string The path of the documentation page - default: `/documentation`,\n* `enableDocumentationPage`: boolean Enable the the documentation page - default: `true`,\n* `auth`: string The auth strategy to use if enableDocumentationPage is `true` - default: `false`,\n* `endpoint`: string the JSON endpoint that describes the API - default: `/docs`\n* `pathPrefixSize`: number Selects what segment of the URL path is used to group endpoints - default: `1`\n* `payloadType`: string Weather accepts `json` or `form` parameters for payload - default: `json`\n* `produces`: array The output types from your API - the default is: `['application/json']`\n* `authorizations`: object Containing [swagger authorization objects](https://github.com/swagger-api/swagger-spec/blob/master/versions/1.2.md#515-authorization-object), the keys mapping to HAPI auth strategy names. No defaults are provided.\n* `info`: a [swagger info object](https://github.com/swagger-api/swagger-spec/blob/master/versions/1.2.md#513-info-object) with metadata about the API.\n    * `title`   string  Required. The title of the application\n    * `description` string  Required. A short description of the application\n    * `termsOfServiceUrl`   string  A URL to the Terms of Service of the API\n    * `contact` string  An email to be used for API-related correspondence\n    * `license` string  The license name used for the API\n    * `licenseUrl`  string  A URL to the license used for the API\n\n\n### Response Object\nHAPI allow you to define a response object for an API endpoint. The response object is used by HAPI to both validation and description the output of an API. It uses the same JOI validation objects to describe the input parameters. The plugin turns these object into visual description and examples in the Swagger UI.\n\nAn very simple example of the use of the response object:\n```Javascript\nvar responseModel = Joi.object({\n    equals: Joi.number(),\n}).meta({\n  className: 'Result'\n});\n```\nwithin you route object ...\n```Javascript\nconfig: {\n    handler: handlers.add,\n    description: 'Add',\n    tags: ['api'],\n    notes: ['Adds together two numbers and return the result'],\n    validate: {\n        params: {\n            a: Joi.number()\n                .required()\n                .description('the first number'),\n\n            b: Joi.number()\n                .required()\n                .description('the second number')\n        }\n    },\n    response: {schema: responseModel}\n}\n```\n\nA working demo of more complex uses of response object can be found in the [be-more-hapi](https://github.com/glennjones/be-more-hapi) project.\n\n\n\n### Error Status Codes\nYou can add HTTP error status codes to each of the endpoints. As HAPI routes don not directly have a property for error status codes so you need to add them the plugin configuration. The status codes need to be added as an array of objects with an error code and description:\n```Javascript\nconfig: {\n    handler: handlers.add,\n    description: 'Add',\n    tags: ['api'],\n    jsonp: 'callback',\n    notes: ['Adds together two numbers and return the result'],\n    plugins: {\n        'hapi-swagger': {\n            responseMessages: [\n                { code: 400, message: 'Bad Request' },\n                { code: 500, message: 'Internal Server Error'}\n            ]\n        }\n    },\n    validate: {\n        params: {\n            a: Joi.number()\n                .required()\n                .description('the first number'),\n\n            b: Joi.number()\n                .required()\n                .description('the second number')\n        }\n    }\n}\n```\n### File upload\nThe plug-in has basic support for file uploads into your API's. Below is an example of a route with a file upload, the three important elements are:\n\n* `payloadType: 'form'` in the plugins section creates a form for upload\n* `.meta({ swaggerType: 'file' })` add to the payload property you wish to be file upload\n* `payload` configuration how HAPI will process file\n```Javascript\n{\n    method: 'POST',\n    path: '/store/file/',\n    config: {\n        handler: handlers.storeAddFile,\n        plugins: {\n            'hapi-swagger': {\n                payloadType: 'form'\n            }\n        },\n        tags: ['api'],\n        validate: {\n            payload: {\n                file: Joi.any()\n                    .meta({ swaggerType: 'file' })\n                    .description('json file')\n            }\n        },\n        payload: {\n            maxBytes: 1048576,\n            parse: true,\n            output: 'stream'\n        },\n        response: {schema : sumModel}\n}\n```\nThe  https://github.com/glennjones/be-more-hapi project has an example of file upload with the handler function dealing with validation, such as filetype and schema validation.\n\n\n### Headers and .unknown()\nA common issue with the use of headers is that you may only want to validate some of the headers sent in a request and you are not concerned about other headers that maybe sent also. You can use JOI .unknown() to allow any all other headers to be sent without validation errors.\n```Javascript\nvalidate: {\n    params: {\n        a: Joi.number()\n            .required()\n            .description('the first number'),\n\n        b: Joi.number()\n            .required()\n            .description('the second number')\n    },\n    headers: Joi.object({\n         'authorization': Joi.string().required()\n    }).unknown()\n}\n```\n\n\n\n### Mocha test\nThe project has a small number integration and unit tests. To run the test within the project type the following command.\n```bash\n$ mocha --reporter list\n```\nIf you are considering sending a pull request please add tests for the functionality you add or change.\n\n\n### Thanks\nI would like to thank [Brandwatch](http://www.brandwatch.com/) who allow me to open this code up as part of the work on this plugin was done during a contract with them.\n\n\n### This is a work in progress\nIf you find any issue please file here on github and I will try and fix them.\n",
  "readmeFilename": "README.md",
  "bugs": {
    "url": "https://github.com/glennjones/hapi-swagger/issues"
  },
  "homepage": "https://github.com/glennjones/hapi-swagger",
  "_id": "hapi-swagger@2.1.0",
  "_from": "hapi-swagger@~2.1.0"
}
